// Copyright Â© 2023 The Things Network Foundation, The Things Industries B.V.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

.button
  // Without secondary or primary style,
  // the button should not apply any styling.
  // This is to cater for special situations
  // where the button is used as a container.
  reset-button()

  &.primary, &.secondary, &.naked
    position: relative
    display: inline-flex
    transition: 80ms background ease-in-out, 80ms color ease-in-out, 80ms border-color ease-in-out, 80ms box-shadow ease-in-out
    border-radius: $br.m
    outline: 0
    cursor: pointer
    justify-content: center
    align-items: center
    gap: $cs.xxs
    height: 2.5rem
    text-decoration: none
    padding: 0 $cs.m
    white-space: nowrap
    box-sizing: border-box

  .icon
    margin-left: - $cs.xxs

    &:only-child
      margin-right: - $cs.xxs

  .expand-icon
    color: $c.grey-500
    font-size: 1.285rem
    margin-right: - $cs.xxs

  &.only-icon
    gap: 0
    padding: 0 $cs.s

  &.primary
    color: white
    background-color: $c-active-blue

    &:disabled
      background-color: $c-divider-dark

    &:not(:disabled)
      &:hover
        background-color: hoverize($c-active-blue)

      +focus-visible()
        background-color: hoverize($c-active-blue)

      &:active
        background-color: activize($c-active-blue)

    &.warning
      background-color: $c-warning

      &:not(:disabled)
        &:hover
          background-color: hoverize($c-warning)

        +focus-visible()
          background-color: hoverize($c-warning)

        &:active
          background-color: activize($c-warning)

    &.danger
      background-color: $c-error

      &:not(:disabled)
        &:hover
          background-color: hoverize($c-error)

        +focus-visible()
          background-color: hoverize($c-error)

        &:active
          background-color: activize($c-error)

      &:disabled
        background-color: transparentify($c-error, #fff, .25)

  &.secondary
    color: $tc-deep-gray
    background-color: white
    box-shadow: 0px 2px 2px 0px rgba(0 0 0 4.5%), inset 0px 0px 0px 1px white
    background: linear-gradient(to bottom, white, white) padding-box, linear-gradient(to bottom, #E8E7EC, #D7D7D7) border-box
    border: 1px solid transparent

    &:hover
      background: linear-gradient(to bottom, $c-focus, $c-focus) padding-box, linear-gradient(to bottom, #E8E7EC, #D7D7D7) border-box

    +focus-visible()
      background: linear-gradient(to bottom, $c-focus, $c-focus) padding-box, linear-gradient(to bottom, #E8E7EC, #D7D7D7) border-box

    &:active
      background: linear-gradient(to bottom, $c-focus, $c-focus) padding-box, linear-gradient(to bottom, #E8E7EC, #D7D7D7) border-box
      box-shadow: none

  &.naked
    color: $tc-subtle-gray

    &:disabled
      color: transparentify($tc-subtle-gray, #fff, .25) !important

    &:not(:disabled)
      &:hover
        background-color: rgba(0,0,0,.04)
        color: $c.grey-700

      +focus-visible()
        background-color: rgba(0,0,0,.04)
        color: $c.grey-700

      &:active
        background-color: $c-backdrop

    &.only-icon
      width: 2.5rem
      height: 2.5rem

    &.small
      width: 2rem
      height: 2rem
      border-radius: $br.s

    &.warning
      color: $c.orange-warning-500

      &:hover
        color: $c.orange-warning-600

    &.danger
      color: $c.red-error-500

      &:hover
        color: $c.red-error-600

  &.with-dropdown&.only-icon
    width: fit-content

  &.with-icon
    line-height: 1.3

    &.responsive-label
      padding: $cs.xs

      +media-query($bp.xxs)
        .icon
          margin-left: 0
          margin-right: 0

        .link-button-message
          display: none

  &.error
    animation: shake .15s 4 linear

  &:disabled
    cursor: default

  &.busy:not(.naked),
  &.busy
    color: transparent !important
    position: relative
    svg
      center-absolute()

    stop
      stop-color: $s
.content
  position: relative

.spinner
  position: absolute
  top: 0
  bottom: 0
  left: - $cs.s
  right: - $cs.s

.button-group
  display: flex
  flex-direction: column
  align-items: stretch

  &.align-start
    justify-content: flex-start

  &.align-end
    justify-content: flex-end

  &.align-center
    justify-content: center

  +media-query-min($bp.s)
    flex-direction: row
    align-items: center

  .button:not(:last-child)
    margin-right: $cs.xs

    +media-query($bp.s)
      margin-bottom: $cs.s !important
      margin-right: 0 !important
